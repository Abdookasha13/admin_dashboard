@if(serviceId){
<h1 class="title-form mb-3">Edit Service</h1>
} @else {
<h1 class="title-form mb-3">Add Service</h1>
}

<form (ngSubmit)="addService()" #form="ngForm" class="add-update-form">
  <div class="row g-4 align-items-start">
    <div class="col-lg-8">
      <div class="left p-4">
        <!-- ----------------title------------------- -->
        <label for="title" class="form-label">Title</label>
        <div class="row g-4 mb-3">
          <!-- ----------------title en------------------- -->
          <div class="col-lg-6">
            <input
              type="text"
              class="form-control"
              id="title"
              placeholder="Enter title (EN)"
              name="titleEn"
              required
              [(ngModel)]="service.title.en"
              #titleEn="ngModel"
              [ngClass]="{ 'is-invalid': (titleEn.touched || titleEn.dirty) && titleEn.invalid }"
            />
            @if(titleEn.touched && titleEn.errors) {
            <div class="invalid-feedback">
              @if(titleEn.errors['required']) {
              <span>Title is required.</span>
              } @if(titleEn.errors['minlength']) {
              <span>Title must be at least 3 characters.</span>
              }
            </div>
            }
          </div>

          <!-- ----------------title ar------------------- -->
          <div class="col-lg-6">
            <input
              type="text"
              class="form-control"
              id="title"
              placeholder="Enter title (AR)"
              name="titleAr"
              required
              [(ngModel)]="service.title.ar"
              #titleAr="ngModel"
              [ngClass]="{ 'is-invalid': (titleAr.touched || titleAr.dirty) && titleAr.invalid }"
            />
            @if(titleAr.touched && titleAr.errors) {
            <div class="invalid-feedback">
              @if(titleAr.errors['required']) {
              <span>Title is required.</span>
              } @if(titleAr.errors['minlength']) {
              <span>Title must be at least 3 characters.</span>
              }
            </div>
            }
          </div>
        </div>

        <!-- ----------------------description---------------------- -->
        <label for="description" class="form-label">Description</label>
        <div class="row g-4">
          <!-- ----------------------description en---------------------- -->
          <div class="col-lg-6">
            <textarea
              class="form-control"
              id="description"
              rows="3"
              placeholder="Enter description (EN)"
              name="descriptionEn"
              required
              [(ngModel)]="service.description.en"
              #descriptionEn="ngModel"
              [ngClass]="{
                'is-invalid':
                  (descriptionEn.touched || descriptionEn.dirty) && descriptionEn.invalid
              }"
            ></textarea>
            @if(descriptionEn.touched && descriptionEn.errors) {
            <div class="invalid-feedback">
              @if(descriptionEn.errors['required']) {
              <span>Description is required.</span>
              } @if(descriptionEn.errors['minlength']) {
              <span>Description must be at least 10 characters.</span>
              }
            </div>
            }
          </div>

          <!-- ----------------------description ar---------------------- -->
          <div class="col-lg-6">
            <textarea
              class="form-control"
              id="description"
              rows="3"
              placeholder="Enter description (AR)"
              name="descriptionAr"
              required
              [(ngModel)]="service.description.ar"
              #descriptionAr="ngModel"
              [ngClass]="{
                'is-invalid':
                  (descriptionAr.touched || descriptionAr.dirty) && descriptionAr.invalid
              }"
            ></textarea>
            @if(descriptionAr.touched && descriptionAr.errors) {
            <div class="invalid-feedback">
              @if(descriptionAr.errors['required']) {
              <span>Description is required.</span>
              } @if(descriptionAr.errors['minlength']) {
              <span>Description must be at least 10 characters.</span>
              }
            </div>
            }
          </div>
        </div>
      </div>
    </div>

    <div class="col-lg-4">
      <div class="right p-4">
        <!-- ----------------service icon---------------------- -->
        <div class="mb-4">
          <label for="icon" class="form-label">Service Icon</label>
          <select
            class="form-select"
            id="icon"
            name="icon"
            required
            [(ngModel)]="service.icon"
            #icon="ngModel"
            [ngClass]="{ 'is-invalid': (icon.touched || icon.dirty) && icon.invalid }"
          >
            <option value="" disabled selected>Choose an icon</option>
            @for(iconOption of serviceIcons; track iconOption.value) {
            <option [value]="iconOption.value">
              {{ iconOption.label }}
            </option>
            }
          </select>
          @if(service.icon) {
          <div class="mt-3 text-center">
            <div class="icon-preview-wrapper">
              <i class="{{ service.icon }}" style="font-size: 3rem; color: #0ab99d"></i>
            </div>
            <small class="text-muted d-block mt-2">{{ service.icon }}</small>
          </div>
          } @if(icon.touched && icon.errors) {
          <div class="invalid-feedback">
            @if(icon.errors['required']) {
            <span>Service icon is required.</span>
            }
          </div>
          }
        </div>
      </div>
    </div>
  </div>

  <div class="d-flex justify-content-center mt-5">
    @if(serviceId) {
    <button type="submit" class="btn-add" [disabled]="form.invalid">Update Service</button>
    } @else {
    <button type="submit" class="btn-add" [disabled]="form.invalid || !service.icon">
      Add Service
    </button>
    }
  </div>
</form>
